import{c as m}from"./accepts-xg_Lkw5-.js";import{r as h}from"./react-DExB2CO0.js";var S={},w=m&&m.__assign||function(){return w=Object.assign||function(r){for(var t,a=1,o=arguments.length;a<o;a++){t=arguments[a];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(r[u]=t[u])}return r},w.apply(this,arguments)};Object.defineProperty(S,"__esModule",{value:!0});var c=h;function y(r,t,a){var o=(0,c.useMemo)(function(){return w({serializer:JSON.stringify,parser:JSON.parse,logger:console.log,syncData:!0},a)},[a]),u=o.serializer,g=o.parser,l=o.logger,d=o.syncData,n=(0,c.useRef)(null),v=(0,c.useState)(function(){if(typeof window>"u")return t;try{n.current=window.localStorage.getItem(r);var i=n.current?g(n.current):t;return i}catch(e){return l(e),t}}),s=v[0],p=v[1];return(0,c.useEffect)(function(){if(!(typeof window>"u")){var i=function(){if(s!==void 0){var e=u(s),f=n.current;n.current=e,window.localStorage.setItem(r,e),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:r,newValue:e,oldValue:f}))}else window.localStorage.removeItem(r),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:r}))};try{i()}catch(e){l(e)}}},[s]),(0,c.useEffect)(function(){if(d){var i=function(e){if(!(e.key!==r||e.storageArea!==window.localStorage))try{e.newValue!==n.current&&(n.current=e.newValue,p(e.newValue?g(e.newValue):void 0))}catch(f){l(f)}};if(!(typeof window>"u"))return window.addEventListener("storage",i),function(){return window.removeEventListener("storage",i)}}},[r,d]),[s,p]}S.default=y;
