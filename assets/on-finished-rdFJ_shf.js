import{e as l}from"./ee-first-Dy_SxThD.js";import{r as h}from"./body-parser-ClE_Zh4T.js";var c={exports:{}};/*!
 * on-finished
 * Copyright(c) 2013 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */c.exports=k;c.exports.isFinished=d;var s=S(),f=l,p=typeof setImmediate=="function"?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function k(e,n){return d(e)!==!1?(p(n,null,e),e):(y(e,_(n)),e)}function d(e){var n=e.socket;if(typeof e.finished=="boolean")return!!(e.finished||n&&!n.writable);if(typeof e.complete=="boolean")return!!(e.upgrade||!n||!n.readable||e.complete&&!e.readable)}function v(e,n){var r,i,t=!1;function a(u){r.cancel(),i.cancel(),t=!0,n(u)}r=i=f([[e,"end","finish"]],a);function o(u){e.removeListener("socket",o),!t&&r===i&&(i=f([[u,"error","close"]],a))}if(e.socket){o(e.socket);return}e.on("socket",o),e.socket===void 0&&q(e,o)}function y(e,n){var r=e.__onFinished;(!r||!r.queue)&&(r=e.__onFinished=F(e),v(e,r)),r.queue.push(n)}function F(e){function n(r){if(e.__onFinished===n&&(e.__onFinished=null),!!n.queue){var i=n.queue;n.queue=null;for(var t=0;t<i.length;t++)i[t](r,e)}}return n.queue=[],n}function q(e,n){var r=e.assignSocket;typeof r=="function"&&(e.assignSocket=function(t){r.call(this,t),n(t)})}function S(){try{return h}catch{return{}}}function _(e){var n;return s.AsyncResource&&(n=new s.AsyncResource(e.name||"bound-anonymous-fn")),!n||!n.runInAsyncScope?e:n.runInAsyncScope.bind(n,e,null)}var A=c.exports;export{A as o};
