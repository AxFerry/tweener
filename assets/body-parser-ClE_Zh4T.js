import{b as q}from"./depd-x3Zs8R4U.js";import{r as S}from"./bytes-D4kJ2E9_.js";import{c as I}from"./content-type-BCswt1n9.js";import{h as X}from"./http-errors-DNGOsyiD.js";import{d as re}from"./destroy-jg19Iw-B.js";import{r as te}from"./raw-body-CQ-IsH85.js";import{r as ne}from"./iconv-lite-5qAB4LgQ.js";import{o as ae}from"./on-finished-rdFJ_shf.js";import{u as ie}from"./unpipe-4hUtEN2w.js";import{g as oe}from"./accepts-xg_Lkw5-.js";import{t as A}from"./type-is-0hCtcddM.js";import{l as ue}from"./qs-DewgiqwQ.js";var G={exports:{}},O={exports:{}},N={exports:{}},M,H;function se(){if(H)return M;H=1;var v=1e3,n=v*60,y=n*60,u=y*24,b=u*365.25;M=function(e,t){t=t||{};var i=typeof e;if(i==="string"&&e.length>0)return g(e);if(i==="number"&&isNaN(e)===!1)return t.long?l(e):w(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function g(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]),d=(t[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return i*b;case"days":case"day":case"d":return i*u;case"hours":case"hour":case"hrs":case"hr":case"h":return i*y;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*v;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function w(e){return e>=u?Math.round(e/u)+"d":e>=y?Math.round(e/y)+"h":e>=n?Math.round(e/n)+"m":e>=v?Math.round(e/v)+"s":e+"ms"}function l(e){return c(e,u,"day")||c(e,y,"hour")||c(e,n,"minute")||c(e,v,"second")||e+" ms"}function c(e,t,i){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}return M}var Y;function ce(){return Y||(Y=1,function(v,n){n=v.exports=b.debug=b.default=b,n.coerce=c,n.disable=w,n.enable=g,n.enabled=l,n.humanize=se(),n.names=[],n.skips=[],n.formatters={};var y;function u(e){var t=0,i;for(i in e)t=(t<<5)-t+e.charCodeAt(i),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function b(e){function t(){if(t.enabled){var i=t,d=+new Date,m=d-(y||d);i.diff=m,i.prev=y,i.curr=d,y=d;for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];a[0]=n.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(f,p){if(f==="%%")return f;o++;var h=n.formatters[p];if(typeof h=="function"){var E=a[o];f=h.call(i,E),a.splice(o,1),o--}return f}),n.formatArgs.call(i,a);var s=t.log||n.log||console.log.bind(console);s.apply(i,a)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=u(e),typeof n.init=="function"&&n.init(t),t}function g(e){n.save(e),n.names=[],n.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),i=t.length,d=0;d<i;d++)t[d]&&(e=t[d].replace(/\*/g,".*?"),e[0]==="-"?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function w(){n.enable("")}function l(e){var t,i;for(t=0,i=n.skips.length;t<i;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;t<i;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}}(N,N.exports)),N.exports}var Z;function B(){return Z||(Z=1,function(v,n){var y={};n=v.exports=ce(),n.log=g,n.formatArgs=b,n.save=w,n.load=l,n.useColors=u,n.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function u(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}n.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function b(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!!t){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var d=0,m=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(d++,a==="%c"&&(m=d))}),e.splice(m,0,i)}}function g(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function w(e){try{e==null?n.storage.removeItem("debug"):n.storage.debug=e}catch{}}function l(){var e;try{e=n.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=y.DEBUG),e}n.enable(l());function c(){try{return window.localStorage}catch{}}}(O,O.exports)),O.exports}const fe={},de=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),ee=oe(de);/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var $,K;function z(){if(K)return $;K=1;var v=X,n=re,y=te(),u=ne(),b=ae,g=ie,w=ee;$=l;function l(t,i,d,m,a,r){var o,s=r,f;t._body=!0;var p=s.encoding!==null?s.encoding:null,h=s.verify;try{f=c(t,a,s.inflate),o=f.length,f.length=void 0}catch(E){return d(E)}if(s.length=o,s.encoding=h?null:p,s.encoding===null&&p!==null&&!u.encodingExists(p))return d(v(415,'unsupported charset "'+p.toUpperCase()+'"',{charset:p.toLowerCase(),type:"charset.unsupported"}));a("read body"),y(f,s,function(E,_){if(E){var T;E.type==="encoding.unsupported"?T=v(415,'unsupported charset "'+p.toUpperCase()+'"',{charset:p.toLowerCase(),type:"charset.unsupported"}):T=v(400,E),f!==t&&(g(t),n(f,!0)),e(t,function(){d(v(400,T))});return}if(h)try{a("verify body"),h(t,i,_,p)}catch(C){d(v(403,C,{body:_,type:C.type||"entity.verify.failed"}));return}var L=_;try{a("parse body"),L=typeof _!="string"&&p!==null?u.decode(_,p):_,t.body=m(L)}catch(C){d(v(400,C,{body:L,type:C.type||"entity.parse.failed"}));return}d()})}function c(t,i,d){var m=(t.headers["content-encoding"]||"identity").toLowerCase(),a=t.headers["content-length"],r;if(i('content-encoding "%s"',m),d===!1&&m!=="identity")throw v(415,"content encoding unsupported",{encoding:m,type:"encoding.unsupported"});switch(m){case"deflate":r=w.createInflate(),i("inflate body"),t.pipe(r);break;case"gzip":r=w.createGunzip(),i("gunzip body"),t.pipe(r);break;case"identity":r=t,r.length=a;break;default:throw v(415,'unsupported content encoding "'+m+'"',{encoding:m,type:"encoding.unsupported"})}return r}function e(t,i){b.isFinished(t)?i(null):(b(t,i),t.resume())}return $}/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var J,W;function pe(){if(W)return J;W=1;var v=S(),n=I,y=X,u=B()("body-parser:json"),b=z(),g=A;J=e;var w=/^[\x20\x09\x0a\x0d]*([^\x20\x09\x0a\x0d])/,l="#",c=/#+/g;function e(r){var o=r||{},s=typeof o.limit!="number"?v.parse(o.limit||"100kb"):o.limit,f=o.inflate!==!1,p=o.reviver,h=o.strict!==!1,E=o.type||"application/json",_=o.verify||!1;if(_!==!1&&typeof _!="function")throw new TypeError("option verify must be function");var T=typeof E!="function"?a(E):E;function L(C){if(C.length===0)return{};if(h){var k=i(C);if(k!=="{"&&k!=="[")throw u("strict violation"),t(C,k)}try{return u("parse json"),JSON.parse(C,p)}catch(R){throw m(R,{message:R.message,stack:R.stack})}}return function(k,R,j){if(k._body){u("body already parsed"),j();return}if(k.body=k.body||{},!g.hasBody(k)){u("skip empty body"),j();return}if(u("content-type %j",k.headers["content-type"]),!T(k)){u("skip parsing"),j();return}var P=d(k)||"utf-8";if(P.slice(0,4)!=="utf-"){u("invalid charset"),j(y(415,'unsupported charset "'+P.toUpperCase()+'"',{charset:P,type:"charset.unsupported"}));return}b(k,R,j,L,u,{encoding:P,inflate:f,limit:s,verify:_})}}function t(r,o){var s=r.indexOf(o),f="";if(s!==-1){f=r.substring(0,s)+l;for(var p=s+1;p<r.length;p++)f+=l}try{throw JSON.parse(f),new SyntaxError("strict violation")}catch(h){return m(h,{message:h.message.replace(c,function(E){return r.substring(s,s+E.length)}),stack:h.stack})}}function i(r){var o=w.exec(r);return o?o[1]:void 0}function d(r){try{return(n.parse(r).parameters.charset||"").toLowerCase()}catch{return}}function m(r,o){for(var s=Object.getOwnPropertyNames(r),f=0;f<s.length;f++){var p=s[f];p!=="stack"&&p!=="message"&&delete r[p]}return r.stack=o.stack.replace(r.message,o.message),r.message=o.message,r}function a(r){return function(s){return!!g(s,r)}}return J}/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var F,Q;function le(){if(Q)return F;Q=1;var v=S(),n=B()("body-parser:raw"),y=z(),u=A;F=b;function b(w){var l=w||{},c=l.inflate!==!1,e=typeof l.limit!="number"?v.parse(l.limit||"100kb"):l.limit,t=l.type||"application/octet-stream",i=l.verify||!1;if(i!==!1&&typeof i!="function")throw new TypeError("option verify must be function");var d=typeof t!="function"?g(t):t;function m(a){return a}return function(r,o,s){if(r._body){n("body already parsed"),s();return}if(r.body=r.body||{},!u.hasBody(r)){n("skip empty body"),s();return}if(n("content-type %j",r.headers["content-type"]),!d(r)){n("skip parsing"),s();return}y(r,o,s,m,n,{encoding:null,inflate:c,limit:e,verify:i})}}function g(w){return function(c){return!!u(c,w)}}return F}/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var U,V;function ye(){if(V)return U;V=1;var v=S(),n=I,y=B()("body-parser:text"),u=z(),b=A;U=g;function g(c){var e=c||{},t=e.defaultCharset||"utf-8",i=e.inflate!==!1,d=typeof e.limit!="number"?v.parse(e.limit||"100kb"):e.limit,m=e.type||"text/plain",a=e.verify||!1;if(a!==!1&&typeof a!="function")throw new TypeError("option verify must be function");var r=typeof m!="function"?l(m):m;function o(s){return s}return function(f,p,h){if(f._body){y("body already parsed"),h();return}if(f.body=f.body||{},!b.hasBody(f)){y("skip empty body"),h();return}if(y("content-type %j",f.headers["content-type"]),!r(f)){y("skip parsing"),h();return}var E=w(f)||t;u(f,p,h,o,y,{encoding:E,inflate:i,limit:d,verify:a})}}function w(c){try{return(n.parse(c).parameters.charset||"").toLowerCase()}catch{return}}function l(c){return function(t){return!!b(t,c)}}return U}/*!
 * body-parser
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var D,x;function ve(){if(x)return D;x=1;var v=S(),n=I,y=X,u=B()("body-parser:urlencoded");q("body-parser");var b=z(),g=A;D=l;var w=Object.create(null);function l(a){var r=a||{};r.extended;var o=r.extended!==!1,s=r.inflate!==!1,f=typeof r.limit!="number"?v.parse(r.limit||"100kb"):r.limit,p=r.type||"application/x-www-form-urlencoded",h=r.verify||!1,E=typeof r.depth!="number"?Number(r.depth||32):r.depth;if(h!==!1&&typeof h!="function")throw new TypeError("option verify must be function");var _=o?c(r):d(r),T=typeof p!="function"?m(p):p;function L(C){return C.length?_(C):{}}return function(k,R,j){if(k._body){u("body already parsed"),j();return}if(k.body=k.body||{},!g.hasBody(k)){u("skip empty body"),j();return}if(u("content-type %j",k.headers["content-type"]),!T(k)){u("skip parsing"),j();return}var P=e(k)||"utf-8";if(P!=="utf-8"){u("invalid charset"),j(y(415,'unsupported charset "'+P.toUpperCase()+'"',{charset:P,type:"charset.unsupported"}));return}b(k,R,j,L,u,{debug:u,encoding:P,inflate:s,limit:f,verify:h,depth:E})}}function c(a){var r=a.parameterLimit!==void 0?a.parameterLimit:1e3,o=typeof a.depth!="number"?Number(a.depth||32):a.depth,s=i("qs");if(isNaN(r)||r<1)throw new TypeError("option parameterLimit must be a positive number");if(isNaN(o)||o<0)throw new TypeError("option depth must be a zero or a positive number");return isFinite(r)&&(r=r|0),function(p){var h=t(p,r);if(h===void 0)throw u("too many parameters"),y(413,"too many parameters",{type:"parameters.too.many"});var E=Math.max(100,h);u("parse extended urlencoding");try{return s(p,{allowPrototypes:!0,arrayLimit:E,depth:o,strictDepth:!0,parameterLimit:r})}catch(_){throw _ instanceof RangeError?y(400,"The input exceeded the depth",{type:"querystring.parse.rangeError"}):_}}}function e(a){try{return(n.parse(a).parameters.charset||"").toLowerCase()}catch{return}}function t(a,r){for(var o=0,s=0;(s=a.indexOf("&",s))!==-1;)if(o++,s++,o===r)return;return o}function i(a){var r=w[a];if(r!==void 0)return r.parse;switch(a){case"qs":r=ue;break;case"querystring":r=ee;break}return w[a]=r,r.parse}function d(a){var r=a.parameterLimit!==void 0?a.parameterLimit:1e3,o=i("querystring");if(isNaN(r)||r<1)throw new TypeError("option parameterLimit must be a positive number");return isFinite(r)&&(r=r|0),function(f){var p=t(f,r);if(p===void 0)throw u("too many parameters"),y(413,"too many parameters",{type:"parameters.too.many"});return u("parse urlencoding"),o(f,void 0,void 0,{maxKeys:r})}}function m(a){return function(o){return!!g(o,a)}}return D}/*!
 * body-parser
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(v,n){var y=q("body-parser"),u=Object.create(null);n=v.exports=y.function(b,"bodyParser: use individual json/urlencoded middlewares"),Object.defineProperty(n,"json",{configurable:!0,enumerable:!0,get:g("json")}),Object.defineProperty(n,"raw",{configurable:!0,enumerable:!0,get:g("raw")}),Object.defineProperty(n,"text",{configurable:!0,enumerable:!0,get:g("text")}),Object.defineProperty(n,"urlencoded",{configurable:!0,enumerable:!0,get:g("urlencoded")});function b(l){var c=Object.create(l||null,{type:{configurable:!0,enumerable:!0,value:void 0,writable:!0}}),e=n.urlencoded(c),t=n.json(c);return function(d,m,a){t(d,m,function(r){if(r)return a(r);e(d,m,a)})}}function g(l){return function(){return w(l)}}function w(l){var c=u[l];if(c!==void 0)return c;switch(l){case"json":c=pe();break;case"raw":c=le();break;case"text":c=ye();break;case"urlencoded":c=ve();break}return u[l]=c}})(G,G.exports);var Le=G.exports;export{Le as b,ee as r};
