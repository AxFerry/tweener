import{r as q,b as Ze}from"./body-parser-ClE_Zh4T.js";import{m as Ke}from"./merge-descriptors-Dse_O89V.js";import{f as Ye}from"./finalhandler-BO2V5daK.js";import{a as te}from"./array-flatten-DPV3GTOf.js";import{p as et}from"./path-to-regexp-Caol4ndJ.js";import{m as le}from"./methods-Byx4-baV.js";import{u as re}from"./utils-merge-Cvd6tQ3u.js";import{b as X}from"./depd-x3Zs8R4U.js";import{p as pe}from"./parseurl-Caiu84s2.js";import{s as de}from"./setprototypeof-Dhh4l_9n.js";import{l as xe}from"./qs-DewgiqwQ.js";import{s as Ce}from"./safe-buffer-26KLVhWa.js";import{c as ke}from"./content-disposition-CPT6DLpc.js";import{c as tt}from"./content-type-BCswt1n9.js";import{s as Oe}from"./send-sR5yT8VB.js";import{e as rt}from"./etag-DrPXQ6z0.js";import{p as Te}from"./proxy-addr-Cd6xZwI_.js";import{a as nt}from"./accepts-xg_Lkw5-.js";import{t as st}from"./type-is-0hCtcddM.js";import{f as at}from"./fresh-C7TtD2-c.js";import{r as it}from"./range-parser-BtrMxpva.js";import{h as ot}from"./http-errors-DNGOsyiD.js";import{e as ut}from"./encodeurl-DWuleksE.js";import{e as ft}from"./escape-html-Ctoi4tIA.js";import{o as ct}from"./on-finished-rdFJ_shf.js";import{s as ht}from"./statuses-PShsQ8FC.js";import{c as lt}from"./cookie-signature-DBmE0uXH.js";import{c as pt}from"./cookie-BCRlsI-0.js";import{v as dt}from"./vary-Ct_5hDTN.js";import{r as vt}from"./serve-static-Dz1oqIHy.js";var ge={exports:{}},Ae={exports:{}},_e={exports:{}},ce={exports:{}},he={exports:{}},M=1e3,B=M*60,J=B*60,Q=J*24,gt=Q*365.25,mt=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return yt(r);if(t==="number"&&isNaN(r)===!1)return e.long?bt(r):wt(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function yt(r){if(r=String(r),!(r.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*gt;case"days":case"day":case"d":return t*Q;case"hours":case"hour":case"hrs":case"hr":case"h":return t*J;case"minutes":case"minute":case"mins":case"min":case"m":return t*B;case"seconds":case"second":case"secs":case"sec":case"s":return t*M;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function wt(r){return r>=Q?Math.round(r/Q)+"d":r>=J?Math.round(r/J)+"h":r>=B?Math.round(r/B)+"m":r>=M?Math.round(r/M)+"s":r+"ms"}function bt(r){return K(r,Q,"day")||K(r,J,"hour")||K(r,B,"minute")||K(r,M,"second")||r+" ms"}function K(r,e,t){if(!(r<e))return r<e*1.5?Math.floor(r/e)+" "+t:Math.ceil(r/e)+" "+t+"s"}(function(r,e){e=r.exports=s.debug=s.default=s,e.coerce=h,e.disable=u,e.enable=a,e.enabled=o,e.humanize=mt,e.names=[],e.skips=[],e.formatters={};var t;function n(i){var f=0,p;for(p in i)f=(f<<5)-f+i.charCodeAt(p),f|=0;return e.colors[Math.abs(f)%e.colors.length]}function s(i){function f(){if(f.enabled){var p=f,v=+new Date,C=v-(t||v);p.diff=C,p.prev=t,p.curr=v,t=v;for(var m=new Array(arguments.length),c=0;c<m.length;c++)m[c]=arguments[c];m[0]=e.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var d=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(E,x){if(E==="%%")return E;d++;var y=e.formatters[x];if(typeof y=="function"){var A=m[d];E=y.call(p,A),m.splice(d,1),d--}return E}),e.formatArgs.call(p,m);var g=f.log||e.log||console.log.bind(console);g.apply(p,m)}}return f.namespace=i,f.enabled=e.enabled(i),f.useColors=e.useColors(),f.color=n(i),typeof e.init=="function"&&e.init(f),f}function a(i){e.save(i),e.names=[],e.skips=[];for(var f=(typeof i=="string"?i:"").split(/[\s,]+/),p=f.length,v=0;v<p;v++)f[v]&&(i=f[v].replace(/\*/g,".*?"),i[0]==="-"?e.skips.push(new RegExp("^"+i.substr(1)+"$")):e.names.push(new RegExp("^"+i+"$")))}function u(){e.enable("")}function o(i){var f,p;for(f=0,p=e.skips.length;f<p;f++)if(e.skips[f].test(i))return!1;for(f=0,p=e.names.length;f<p;f++)if(e.names[f].test(i))return!0;return!1}function h(i){return i instanceof Error?i.stack||i.message:i}})(he,he.exports);var Et=he.exports;(function(r,e){var t={};e=r.exports=Et,e.log=a,e.formatArgs=s,e.save=u,e.load=o,e.useColors=n,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:h(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(i){try{return JSON.stringify(i)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}};function s(i){var f=this.useColors;if(i[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+i[0]+(f?"%c ":" ")+"+"+e.humanize(this.diff),!!f){var p="color: "+this.color;i.splice(1,0,p,"color: inherit");var v=0,C=0;i[0].replace(/%[a-zA-Z%]/g,function(m){m!=="%%"&&(v++,m==="%c"&&(C=v))}),i.splice(C,0,p)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(i){try{i==null?e.storage.removeItem("debug"):e.storage.debug=i}catch{}}function o(){var i;try{i=e.storage.debug}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=t.DEBUG),i}e.enable(o());function h(){try{return window.localStorage}catch{}}})(ce,ce.exports);var G=ce.exports;/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var xt=et,Ct=G("express:router:layer"),kt=Object.prototype.hasOwnProperty,je=U;function U(r,e,t){if(!(this instanceof U))return new U(r,e,t);Ct("new %o",r);var n=e||{};this.handle=t,this.name=t.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=xt(r,this.keys=[],n),this.regexp.fast_star=r==="*",this.regexp.fast_slash=r==="/"&&n.end===!1}U.prototype.handle_error=function(e,t,n,s){var a=this.handle;if(a.length!==4)return s(e);try{a(e,t,n,s)}catch(u){s(u)}};U.prototype.handle_request=function(e,t,n){var s=this.handle;if(s.length>3)return n();try{s(e,t,n)}catch(a){n(a)}};U.prototype.match=function(e){var t;if(e!=null){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:me(e)},this.path=e,!0;t=this.regexp.exec(e)}if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var n=this.keys,s=this.params,a=1;a<t.length;a++){var u=n[a-1],o=u.name,h=me(t[a]);(h!==void 0||!kt.call(s,o))&&(s[o]=h)}return!0};function me(r){if(typeof r!="string"||r.length===0)return r;try{return decodeURIComponent(r)}catch(e){throw e instanceof URIError&&(e.message="Failed to decode param '"+r+"'",e.status=e.statusCode=400),e}}/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Se=G("express:router:route"),Re=te,Pe=je,Ot=le,qe=Array.prototype.slice,$e=Object.prototype.toString,Le=F;function F(r){this.path=r,this.stack=[],Se("new %o",r),this.methods={}}F.prototype._handles_method=function(e){if(this.methods._all)return!0;var t=typeof e=="string"?e.toLowerCase():e;return t==="head"&&!this.methods.head&&(t="get"),!!this.methods[t]};F.prototype._options=function(){var e=Object.keys(this.methods);this.methods.get&&!this.methods.head&&e.push("head");for(var t=0;t<e.length;t++)e[t]=e[t].toUpperCase();return e};F.prototype.dispatch=function(e,t,n){var s=0,a=this.stack,u=0;if(a.length===0)return n();var o=typeof e.method=="string"?e.method.toLowerCase():e.method;o==="head"&&!this.methods.head&&(o="get"),e.route=this,h();function h(i){if(i&&i==="route")return n();if(i&&i==="router")return n(i);if(++u>100)return setImmediate(h,i);var f=a[s++];if(!f)return n(i);f.method&&f.method!==o?h(i):i?f.handle_error(i,e,t,h):f.handle_request(e,t,h),u=0}};F.prototype.all=function(){for(var e=Re(qe.call(arguments)),t=0;t<e.length;t++){var n=e[t];if(typeof n!="function"){var s=$e.call(n),a="Route.all() requires a callback function but got a "+s;throw new TypeError(a)}var u=Pe("/",{},n);u.method=void 0,this.methods._all=!0,this.stack.push(u)}return this};Ot.forEach(function(r){F.prototype[r]=function(){for(var e=Re(qe.call(arguments)),t=0;t<e.length;t++){var n=e[t];if(typeof n!="function"){var s=$e.call(n),a="Route."+r+"() requires a callback function but got a "+s;throw new Error(a)}Se("%s %o",r,this.path);var u=Pe("/",{},n);u.method=r,this.methods[r]=!0,this.stack.push(u)}return this}});/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Tt=Le,Ie=je,At=le,ue=re,Y=G("express:router"),_t=X("express"),jt=te,St=pe,Rt=de,Pt=/^\[object (\S+)\]$/,De=Array.prototype.slice,qt=Object.prototype.toString,N=_e.exports=function(r){var e=r||{};function t(n,s,a){t.handle(n,s,a)}return Rt(t,N),t.params={},t._params=[],t.caseSensitive=e.caseSensitive,t.mergeParams=e.mergeParams,t.strict=e.strict,t.stack=[],t};N.param=function(e,t){if(typeof e=="function"){this._params.push(e);return}var n=this._params,s=n.length,a;e[0]===":"&&(_t("router.param("+JSON.stringify(e)+", fn): Use router.param("+JSON.stringify(e.slice(1))+", fn) instead"),e=e.slice(1));for(var u=0;u<s;++u)(a=n[u](e,t))&&(t=a);if(typeof t!="function")throw new Error("invalid param() call for "+e+", got "+t);return(this.params[e]=this.params[e]||[]).push(t),this};N.handle=function(e,t,n){var s=this;Y("dispatching %s %s",e.method,e.url);var a=0,u=It(e.url)||"",o="",h=!1,i=0,f={},p=[],v=s.stack,C=e.params,m=e.baseUrl||"",c=Ft(n,e,"baseUrl","next","params");e.next=d,e.method==="OPTIONS"&&(c=Ht(c,function(E,x){if(x||p.length===0)return E(x);zt(t,p,E)})),e.baseUrl=m,e.originalUrl=e.originalUrl||e.url,d();function d(E){var x=E==="route"?null:E;if(h&&(e.url=e.url.slice(1),h=!1),o.length!==0&&(e.baseUrl=m,e.url=u+o+e.url.slice(u.length),o=""),x==="router"){setImmediate(c,null);return}if(a>=v.length){setImmediate(c,x);return}if(++i>100)return setImmediate(d,E);var y=Lt(e);if(y==null)return c(x);for(var A,S,$;S!==!0&&a<v.length;)if(A=v[a++],S=Nt(A,y),$=A.route,typeof S!="boolean"&&(x=x||S),S===!0&&$){if(x){S=!1;continue}var k=e.method,l=$._handles_method(k);!l&&k==="OPTIONS"&&$t(p,$._options()),!l&&k!=="HEAD"&&(S=!1)}if(S!==!0)return c(x);$&&(e.route=$),e.params=s.mergeParams?Ut(A.params,C):A.params;var b=A.path;s.process_params(A,f,e,t,function(w){w?d(x||w):$?A.handle_request(e,t,d):g(A,x,b,y),i=0})}function g(E,x,y,A){if(y.length!==0){if(y!==A.slice(0,y.length)){d(x);return}var S=A[y.length];if(S&&S!=="/"&&S!==".")return d(x);Y("trim prefix (%s) from url %s",y,e.url),o=y,e.url=u+e.url.slice(u.length+o.length),!u&&e.url[0]!=="/"&&(e.url="/"+e.url,h=!0),e.baseUrl=m+(o[o.length-1]==="/"?o.substring(0,o.length-1):o)}Y("%s %s : %s",E.name,y,e.originalUrl),x?E.handle_error(x,e,t,d):E.handle_request(e,t,d)}};N.process_params=function(e,t,n,s,a){var u=this.params,o=e.keys;if(!o||o.length===0)return a();var h=0,i,f=0,p,v,C,m;function c(g){if(g)return a(g);if(h>=o.length)return a();if(f=0,p=o[h++],i=p.name,v=n.params[i],C=u[i],m=t[i],v===void 0||!C)return c();if(m&&(m.match===v||m.error&&m.error!=="route"))return n.params[i]=m.value,c(m.error);t[i]=m={error:null,match:v,value:v},d()}function d(g){var E=C[f++];if(m.value=n.params[p.name],g){m.error=g,c(g);return}if(!E)return c();try{E(n,s,d,v,p.name)}catch(x){d(x)}}c()};N.use=function(e){var t=0,n="/";if(typeof e!="function"){for(var s=e;Array.isArray(s)&&s.length!==0;)s=s[0];typeof s!="function"&&(t=1,n=e)}var a=jt(De.call(arguments,t));if(a.length===0)throw new TypeError("Router.use() requires a middleware function");for(var u=0;u<a.length;u++){var e=a[u];if(typeof e!="function")throw new TypeError("Router.use() requires a middleware function but got a "+Dt(e));Y("use %o %s",n,e.name||"<anonymous>");var o=new Ie(n,{sensitive:this.caseSensitive,strict:!1,end:!1},e);o.route=void 0,this.stack.push(o)}return this};N.route=function(e){var t=new Tt(e),n=new Ie(e,{sensitive:this.caseSensitive,strict:this.strict,end:!0},t.dispatch.bind(t));return n.route=t,this.stack.push(n),t};At.concat("all").forEach(function(r){N[r]=function(e){var t=this.route(e);return t[r].apply(t,De.call(arguments,1)),this}});function $t(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.indexOf(n)===-1&&r.push(n)}}function Lt(r){try{return St(r).pathname}catch{return}}function It(r){if(!(typeof r!="string"||r.length===0||r[0]==="/")){var e=r.indexOf("?"),t=e!==-1?e:r.length,n=r.slice(0,t).indexOf("://");return n!==-1?r.substring(0,r.indexOf("/",3+n)):void 0}}function Dt(r){var e=typeof r;return e!=="object"?e:qt.call(r).replace(Pt,"$1")}function Nt(r,e){try{return r.match(e)}catch(t){return t}}function Ut(r,e){if(typeof e!="object"||!e)return r;var t=ue({},e);if(!(0 in r)||!(0 in e))return ue(t,r);for(var n=0,s=0;n in r;)n++;for(;s in e;)s++;for(n--;n>=0;n--)r[n+s]=r[n],n<s&&delete r[n];return ue(t,r)}function Ft(r,e){for(var t=new Array(arguments.length-2),n=new Array(arguments.length-2),s=0;s<t.length;s++)t[s]=arguments[s+2],n[s]=e[t[s]];return function(){for(var a=0;a<t.length;a++)e[t[a]]=n[a];return r.apply(this,arguments)}}function zt(r,e,t){try{var n=e.join(",");r.set("Allow",n),r.send(n)}catch(s){t(s)}}function Ht(r,e){return function(){var n=new Array(arguments.length+1);n[0]=r;for(var s=0,a=arguments.length;s<a;s++)n[s+1]=arguments[s];e.apply(this,n)}}var Ne=_e.exports,Ue={};/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ye=de;Ue.init=function(r){return function(t,n,s){r.enabled("x-powered-by")&&n.setHeader("X-Powered-By","Express"),t.res=n,n.req=t,t.next=s,ye(t,r.request),ye(n,r.response),n.locals=n.locals||Object.create(null),s()}};/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var fe,we;function Fe(){if(we)return fe;we=1;var r=re,e=pe,t=xe;return fe=function(s){var a=r({},s),u=t.parse;return typeof s=="function"&&(u=s,a=void 0),a!==void 0&&a.allowPrototypes===void 0&&(a.allowPrototypes=!0),function(h,i,f){if(!h.query){var p=e(h).query;h.query=u(p,a)}f()}},fe}function Mt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ne=G("express:view"),V=q,Bt=q,Jt=V.dirname,ze=V.basename,Qt=V.extname,be=V.join,Xt=V.resolve,Gt=se;function se(r,e){var t=e||{};if(this.defaultEngine=t.defaultEngine,this.ext=Qt(r),this.name=r,this.root=t.root,!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");var n=r;if(this.ext||(this.ext=this.defaultEngine[0]!=="."?"."+this.defaultEngine:this.defaultEngine,n+=this.ext),!t.engines[this.ext]){var s=this.ext.slice(1);ne('require "%s"',s);var a=Mt(s).__express;if(typeof a!="function")throw new Error('Module "'+s+'" does not provide a view engine.');t.engines[this.ext]=a}this.engine=t.engines[this.ext],this.path=this.lookup(n)}se.prototype.lookup=function(e){var t,n=[].concat(this.root);ne('lookup "%s"',e);for(var s=0;s<n.length&&!t;s++){var a=n[s],u=Xt(a,e),o=Jt(u),h=ze(u);t=this.resolve(o,h)}return t};se.prototype.render=function(e,t){ne('render "%s"',this.path),this.engine(this.path,e,t)};se.prototype.resolve=function(e,t){var n=this.ext,s=be(e,t),a=Ee(s);if(a&&a.isFile()||(s=be(e,ze(t,n),"index"+n),a=Ee(s),a&&a.isFile()))return s};function Ee(r){ne('stat "%s"',r);try{return Bt.statSync(r)}catch{return}}var D={};/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(r){var e=Ce.Buffer,t=ke,n=tt,s=X("express"),a=te,u=Oe.mime,o=rt,h=Te,i=xe,f=q;r.etag=v({weak:!1}),r.wetag=v({weak:!0}),r.isAbsolute=function(c){if(c[0]==="/"||c[1]===":"&&(c[2]==="\\"||c[2]==="/")||c.substring(0,2)==="\\\\")return!0},r.flatten=s.function(a,"utils.flatten: use array-flatten npm module instead"),r.normalizeType=function(c){return~c.indexOf("/")?p(c):{value:u.lookup(c),params:{}}},r.normalizeTypes=function(c){for(var d=[],g=0;g<c.length;++g)d.push(r.normalizeType(c[g]));return d},r.contentDisposition=s.function(t,"utils.contentDisposition: use content-disposition npm module instead");function p(c){for(var d=c.split(/ *; */),g={value:d[0],quality:1,params:{}},E=1;E<d.length;++E){var x=d[E].split(/ *= */);x[0]==="q"?g.quality=parseFloat(x[1]):g.params[x[0]]=x[1]}return g}r.compileETag=function(c){var d;if(typeof c=="function")return c;switch(c){case!0:case"weak":d=r.wetag;break;case!1:break;case"strong":d=r.etag;break;default:throw new TypeError("unknown value for etag function: "+c)}return d},r.compileQueryParser=function(d){var g;if(typeof d=="function")return d;switch(d){case!0:case"simple":g=f.parse;break;case!1:g=m;break;case"extended":g=C;break;default:throw new TypeError("unknown value for query parser function: "+d)}return g},r.compileTrust=function(c){return typeof c=="function"?c:c===!0?function(){return!0}:typeof c=="number"?function(d,g){return g<c}:(typeof c=="string"&&(c=c.split(",").map(function(d){return d.trim()})),h.compile(c||[]))},r.setCharset=function(d,g){if(!d||!g)return d;var E=n.parse(d);return E.parameters.charset=g,n.format(E)};function v(c){return function(g,E){var x=e.isBuffer(g)?g:e.from(g,E);return o(x,c)}}function C(c){return i.parse(c,{allowPrototypes:!0})}function m(){return{}}})(D);(function(r,e){/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var t=Ye,n=Ne,s=le,a=Ue,u=Fe(),o=G("express:application"),h=Gt,i=q,f=D.compileETag,p=D.compileQueryParser,v=D.compileTrust,C=X("express"),m=te,c=re,d=q.resolve,g=de,E=Object.prototype.hasOwnProperty,x=Array.prototype.slice,y=r.exports={},A="@@symbol:trust_proxy_default";y.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()},y.defaultConfiguration=function(){var l="production";this.enable("x-powered-by"),this.set("etag","weak"),this.set("env",l),this.set("query parser","extended"),this.set("subdomain offset",2),this.set("trust proxy",!1),Object.defineProperty(this.settings,A,{configurable:!0,value:!0}),o("booting in %s mode",l),this.on("mount",function(w){this.settings[A]===!0&&typeof w.settings["trust proxy fn"]=="function"&&(delete this.settings["trust proxy"],delete this.settings["trust proxy fn"]),g(this.request,w.request),g(this.response,w.response),g(this.engines,w.engines),g(this.settings,w.settings)}),this.locals=Object.create(null),this.mountpath="/",this.locals.settings=this.settings,this.set("view",h),this.set("views",d("views")),this.set("jsonp callback name","callback"),this.enable("view cache"),Object.defineProperty(this,"router",{get:function(){throw new Error(`'app.router' is deprecated!
Please see the 3.x to 4.x migration guide for details on how to update your app.`)}})},y.lazyrouter=function(){this._router||(this._router=new n({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")}),this._router.use(u(this.get("query parser fn"))),this._router.use(a.init(this)))},y.handle=function(l,b,w){var j=this._router,L=w||t(l,b,{env:this.get("env"),onerror:S.bind(this)});if(!j){o("no routes defined on app"),L();return}j.handle(l,b,L)},y.use=function(l){var b=0,w="/";if(typeof l!="function"){for(var j=l;Array.isArray(j)&&j.length!==0;)j=j[0];typeof j!="function"&&(b=1,w=l)}var L=m(x.call(arguments,b));if(L.length===0)throw new TypeError("app.use() requires a middleware function");this.lazyrouter();var W=this._router;return L.forEach(function(R){if(!R||!R.handle||!R.set)return W.use(w,R);o(".use app under %s",w),R.mountpath=w,R.parent=this,W.use(w,function(_,Z,oe){var z=_.app;R.handle(_,Z,function(We){g(_,z.request),g(Z,z.response),oe(We)})}),R.emit("mount",this)},this),this},y.route=function(l){return this.lazyrouter(),this._router.route(l)},y.engine=function(l,b){if(typeof b!="function")throw new Error("callback function required");var w=l[0]!=="."?"."+l:l;return this.engines[w]=b,this},y.param=function(l,b){if(this.lazyrouter(),Array.isArray(l)){for(var w=0;w<l.length;w++)this.param(l[w],b);return this}return this._router.param(l,b),this},y.set=function(l,b){if(arguments.length===1){for(var w=this.settings;w&&w!==Object.prototype;){if(E.call(w,l))return w[l];w=Object.getPrototypeOf(w)}return}switch(o('set "%s" to %o',l,b),this.settings[l]=b,l){case"etag":this.set("etag fn",f(b));break;case"query parser":this.set("query parser fn",p(b));break;case"trust proxy":this.set("trust proxy fn",v(b)),Object.defineProperty(this.settings,A,{configurable:!0,value:!1});break}return this},y.path=function(){return this.parent?this.parent.path()+this.mountpath:""},y.enabled=function(l){return!!this.set(l)},y.disabled=function(l){return!this.set(l)},y.enable=function(l){return this.set(l,!0)},y.disable=function(l){return this.set(l,!1)},s.forEach(function(k){y[k]=function(l){if(k==="get"&&arguments.length===1)return this.set(l);this.lazyrouter();var b=this._router.route(l);return b[k].apply(b,x.call(arguments,1)),this}}),y.all=function(l){this.lazyrouter();for(var b=this._router.route(l),w=x.call(arguments,1),j=0;j<s.length;j++)b[s[j]].apply(b,w);return this},y.del=C.function(y.delete,"app.del: Use app.delete instead"),y.render=function(l,b,w){var j=this.cache,L=w,W=this.engines,R=b,I={},_;if(typeof b=="function"&&(L=b,R={}),c(I,this.locals),R._locals&&c(I,R._locals),c(I,R),I.cache==null&&(I.cache=this.enabled("view cache")),I.cache&&(_=j[l]),!_){var Z=this.get("view");if(_=new Z(l,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:W}),!_.path){var oe=Array.isArray(_.root)&&_.root.length>1?'directories "'+_.root.slice(0,-1).join('", "')+'" or "'+_.root[_.root.length-1]+'"':'directory "'+_.root+'"',z=new Error('Failed to lookup view "'+l+'" in views '+oe);return z.view=_,L(z)}I.cache&&(j[l]=_)}$(_,I,L)},y.listen=function(){var l=i.createServer(this);return l.listen.apply(l,arguments)};function S(k){this.get("env")!=="test"&&console.error(k.stack||k.toString())}function $(k,l,b){try{k.render(l,b)}catch(w){b(w)}}})(Ae);var Vt=Ae.exports;/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ae=nt,ie=X("express"),Wt=q.isIP,Zt=st,Kt=q,Yt=at,er=it,tr=pe,He=Te,O=Object.create(Kt.IncomingMessage.prototype),rr=O;O.get=O.header=function(e){if(!e)throw new TypeError("name argument is required to req.get");if(typeof e!="string")throw new TypeError("name must be a string to req.get");var t=e.toLowerCase();switch(t){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[t]}};O.accepts=function(){var r=ae(this);return r.types.apply(r,arguments)};O.acceptsEncodings=function(){var r=ae(this);return r.encodings.apply(r,arguments)};O.acceptsEncoding=ie.function(O.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead");O.acceptsCharsets=function(){var r=ae(this);return r.charsets.apply(r,arguments)};O.acceptsCharset=ie.function(O.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead");O.acceptsLanguages=function(){var r=ae(this);return r.languages.apply(r,arguments)};O.acceptsLanguage=ie.function(O.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead");O.range=function(e,t){var n=this.get("Range");if(n)return er(e,n,t)};O.param=function(e,t){var n=this.params||{},s=this.body||{},a=this.query||{};return n[e]!=null&&n.hasOwnProperty(e)?n[e]:s[e]!=null?s[e]:a[e]!=null?a[e]:t};O.is=function(e){var t=e;if(!Array.isArray(e)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}return Zt(this,t)};P(O,"protocol",function(){var e=this.connection.encrypted?"https":"http",t=this.app.get("trust proxy fn");if(!t(this.connection.remoteAddress,0))return e;var n=this.get("X-Forwarded-Proto")||e,s=n.indexOf(",");return s!==-1?n.substring(0,s).trim():n.trim()});P(O,"secure",function(){return this.protocol==="https"});P(O,"ip",function(){var e=this.app.get("trust proxy fn");return He(this,e)});P(O,"ips",function(){var e=this.app.get("trust proxy fn"),t=He.all(this,e);return t.reverse().pop(),t});P(O,"subdomains",function(){var e=this.hostname;if(!e)return[];var t=this.app.get("subdomain offset"),n=Wt(e)?[e]:e.split(".").reverse();return n.slice(t)});P(O,"path",function(){return tr(this).pathname});P(O,"hostname",function(){var e=this.app.get("trust proxy fn"),t=this.get("X-Forwarded-Host");if(!t||!e(this.connection.remoteAddress,0)?t=this.get("Host"):t.indexOf(",")!==-1&&(t=t.substring(0,t.indexOf(",")).trimRight()),!!t){var n=t[0]==="["?t.indexOf("]")+1:0,s=t.indexOf(":",n);return s!==-1?t.substring(0,s):t}});P(O,"host",ie.function(function(){return this.hostname},"req.host: Use req.hostname instead"));P(O,"fresh",function(){var r=this.method,e=this.res,t=e.statusCode;return r!=="GET"&&r!=="HEAD"?!1:t>=200&&t<300||t===304?Yt(this.headers,{etag:e.get("ETag"),"last-modified":e.get("Last-Modified")}):!1});P(O,"stale",function(){return!this.fresh});P(O,"xhr",function(){var e=this.get("X-Requested-With")||"";return e.toLowerCase()==="xmlhttprequest"});function P(r,e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:t})}/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */var H=Ce.Buffer,Me=ke,nr=ot,Be=X("express"),sr=ut,ar=ft,ir=q,or=D.isAbsolute,ur=ct,Je=q,ee=ht,Qe=re,fr=lt.sign,cr=D.normalizeType,hr=D.normalizeTypes,lr=D.setCharset,pr=pt,ve=Oe,dr=Je.extname,Xe=ve.mime,vr=Je.resolve,gr=dt,T=Object.create(ir.ServerResponse.prototype),mr=T,yr=/;\s*charset\s*=/;T.status=function(e){return(typeof e=="string"||Math.floor(e)!==e)&&e>99&&e<1e3&&Be("res.status("+JSON.stringify(e)+"): use res.status("+Math.floor(e)+") instead"),this.statusCode=e,this};T.links=function(r){var e=this.get("Link")||"";return e&&(e+=", "),this.set("Link",e+Object.keys(r).map(function(t){return"<"+r[t]+'>; rel="'+t+'"'}).join(", "))};T.send=function(e){var t=e,n,s=this.req,a,u=this.app;switch(arguments.length===2&&(typeof arguments[0]!="number"&&typeof arguments[1]=="number"?this.statusCode=arguments[1]:(this.statusCode=arguments[0],t=arguments[1])),typeof t=="number"&&arguments.length===1&&(this.get("Content-Type")||this.type("txt"),this.statusCode=t,t=ee.message[t]),typeof t){case"string":this.get("Content-Type")||this.type("html");break;case"boolean":case"number":case"object":if(t===null)t="";else if(H.isBuffer(t))this.get("Content-Type")||this.type("bin");else return this.json(t);break}typeof t=="string"&&(n="utf8",a=this.get("Content-Type"),typeof a=="string"&&this.set("Content-Type",lr(a,"utf-8")));var o=u.get("etag fn"),h=!this.get("ETag")&&typeof o=="function",i;t!==void 0&&(H.isBuffer(t)?i=t.length:!h&&t.length<1e3?i=H.byteLength(t,n):(t=H.from(t,n),n=void 0,i=t.length),this.set("Content-Length",i));var f;return h&&i!==void 0&&(f=o(t,n))&&this.set("ETag",f),s.fresh&&(this.statusCode=304),(this.statusCode===204||this.statusCode===304)&&(this.removeHeader("Content-Type"),this.removeHeader("Content-Length"),this.removeHeader("Transfer-Encoding"),t=""),this.statusCode===205&&(this.set("Content-Length","0"),this.removeHeader("Transfer-Encoding"),t=""),s.method==="HEAD"?this.end():this.end(t,n),this};T.json=function(e){var t=e;arguments.length===2&&(typeof arguments[1]=="number"?this.statusCode=arguments[1]:(this.statusCode=arguments[0],t=arguments[1]));var n=this.app,s=n.get("json escape"),a=n.get("json replacer"),u=n.get("json spaces"),o=Ve(t,a,u,s);return this.get("Content-Type")||this.set("Content-Type","application/json"),this.send(o)};T.jsonp=function(e){var t=e;arguments.length===2&&(typeof arguments[1]=="number"?this.statusCode=arguments[1]:(this.statusCode=arguments[0],t=arguments[1]));var n=this.app,s=n.get("json escape"),a=n.get("json replacer"),u=n.get("json spaces"),o=Ve(t,a,u,s),h=this.req.query[n.get("jsonp callback name")];return this.get("Content-Type")||(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","application/json")),Array.isArray(h)&&(h=h[0]),typeof h=="string"&&h.length!==0&&(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","text/javascript"),h=h.replace(/[^\[\]\w$.]/g,""),o===void 0?o="":typeof o=="string"&&(o=o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")),o="/**/ typeof "+h+" === 'function' && "+h+"("+o+");"),this.send(o)};T.sendStatus=function(e){var t=ee.message[e]||String(e);return this.statusCode=e,this.type("txt"),this.send(t)};T.sendFile=function(e,t,n){var s=n,a=this.req,u=this,o=a.next,h=t||{};if(!e)throw new TypeError("path argument is required to res.sendFile");if(typeof e!="string")throw new TypeError("path must be a string to res.sendFile");if(typeof t=="function"&&(s=t,h={}),!h.root&&!or(e))throw new TypeError("path must be absolute or specify root to res.sendFile");var i=encodeURI(e),f=ve(a,i,h);Ge(u,f,h,function(p){if(s)return s(p);if(p&&p.code==="EISDIR")return o();p&&p.code!=="ECONNABORTED"&&p.syscall!=="write"&&o(p)})};T.sendfile=function(r,e,t){var n=t,s=this.req,a=this,u=s.next,o=e||{};typeof e=="function"&&(n=e,o={});var h=ve(s,r,o);Ge(a,h,o,function(i){if(n)return n(i);if(i&&i.code==="EISDIR")return u();i&&i.code!=="ECONNABORTED"&&i.syscall!=="write"&&u(i)})};T.sendfile=Be.function(T.sendfile,"res.sendfile: Use res.sendFile instead");T.download=function(e,t,n,s){var a=s,u=t,o=n||null;typeof t=="function"?(a=t,u=null,o=null):typeof n=="function"&&(a=n,o=null),typeof t=="object"&&(typeof n=="function"||n===void 0)&&(u=null,o=t);var h={"Content-Disposition":Me(u||e)};if(o&&o.headers)for(var i=Object.keys(o.headers),f=0;f<i.length;f++){var p=i[f];p.toLowerCase()!=="content-disposition"&&(h[p]=o.headers[p])}o=Object.create(o),o.headers=h;var v=o.root?e:vr(e);return this.sendFile(v,o,a)};T.contentType=T.type=function(e){var t=e.indexOf("/")===-1?Xe.lookup(e):e;return this.set("Content-Type",t)};T.format=function(r){var e=this.req,t=e.next,n=Object.keys(r).filter(function(a){return a!=="default"}),s=n.length>0?e.accepts(n):!1;return this.vary("Accept"),s?(this.set("Content-Type",cr(s).value),r[s](e,this,t)):r.default?r.default(e,this,t):t(nr(406,{types:hr(n).map(function(a){return a.value})})),this};T.attachment=function(e){return e&&this.type(dr(e)),this.set("Content-Disposition",Me(e)),this};T.append=function(e,t){var n=this.get(e),s=t;return n&&(s=Array.isArray(n)?n.concat(t):Array.isArray(t)?[n].concat(t):[n,t]),this.set(e,s)};T.set=T.header=function(e,t){if(arguments.length===2){var n=Array.isArray(t)?t.map(String):String(t);if(e.toLowerCase()==="content-type"){if(Array.isArray(n))throw new TypeError("Content-Type cannot be set to an Array");if(!yr.test(n)){var s=Xe.charsets.lookup(n.split(";")[0]);s&&(n+="; charset="+s.toLowerCase())}}this.setHeader(e,n)}else for(var a in e)this.set(a,e[a]);return this};T.get=function(r){return this.getHeader(r)};T.clearCookie=function(e,t){t&&(t.maxAge,t.expires);var n=Qe({expires:new Date(1),path:"/"},t);return this.cookie(e,"",n)};T.cookie=function(r,e,t){var n=Qe({},t),s=this.req.secret,a=n.signed;if(a&&!s)throw new Error('cookieParser("secret") required for signed cookies');var u=typeof e=="object"?"j:"+JSON.stringify(e):String(e);if(a&&(u="s:"+fr(u,s)),n.maxAge!=null){var o=n.maxAge-0;isNaN(o)||(n.expires=new Date(Date.now()+o),n.maxAge=Math.floor(o/1e3))}return n.path==null&&(n.path="/"),this.append("Set-Cookie",pr.serialize(r,String(u),n)),this};T.location=function(e){var t;return e==="back"?t=this.req.get("Referrer")||"/":t=String(e),this.set("Location",sr(t))};T.redirect=function(e){var t=e,n,s=302;arguments.length===2&&(typeof arguments[0]=="number"?(s=arguments[0],t=arguments[1]):s=arguments[1]),t=this.location(t).get("Location"),this.format({text:function(){n=ee.message[s]+". Redirecting to "+t},html:function(){var a=ar(t);n="<p>"+ee.message[s]+". Redirecting to "+a+"</p>"},default:function(){n=""}}),this.statusCode=s,this.set("Content-Length",H.byteLength(n)),this.req.method==="HEAD"?this.end():this.end(n)};T.vary=function(r){return!r||Array.isArray(r)&&!r.length?this:(gr(this,r),this)};T.render=function(e,t,n){var s=this.req.app,a=n,u=t||{},o=this.req,h=this;typeof t=="function"&&(a=t,u={}),u._locals=h.locals,a=a||function(i,f){if(i)return o.next(i);h.send(f)},s.render(e,u,a)};function Ge(r,e,t,n){var s=!1,a;function u(){if(!s){s=!0;var C=new Error("Request aborted");C.code="ECONNABORTED",n(C)}}function o(){if(!s){s=!0;var C=new Error("EISDIR, read");C.code="EISDIR",n(C)}}function h(C){s||(s=!0,n(C))}function i(){s||(s=!0,n())}function f(){a=!1}function p(C){if(C&&C.code==="ECONNRESET")return u();if(C)return h(C);s||setImmediate(function(){if(a!==!1&&!s){u();return}s||(s=!0,n())})}function v(){a=!0}e.on("directory",o),e.on("end",i),e.on("error",h),e.on("file",f),e.on("stream",v),ur(r,p),t.headers&&e.on("headers",function(m){for(var c=t.headers,d=Object.keys(c),g=0;g<d.length;g++){var E=d[g];m.setHeader(E,c[E])}}),e.pipe(r)}function Ve(r,e,t,n){var s=e||t?JSON.stringify(r,e,t):JSON.stringify(r);return n&&typeof s=="string"&&(s=s.replace(/[<>&]/g,function(a){switch(a.charCodeAt(0)){case 60:return"\\u003c";case 62:return"\\u003e";case 38:return"\\u0026";default:return a}})),s}/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(r,e){var t=Ze,n=q.EventEmitter,s=Ke,a=Vt,u=Le,o=Ne,h=rr,i=mr;e=r.exports=f;function f(){var v=function(C,m,c){v.handle(C,m,c)};return s(v,n.prototype,!1),s(v,a,!1),v.request=Object.create(h,{app:{configurable:!0,enumerable:!0,writable:!0,value:v}}),v.response=Object.create(i,{app:{configurable:!0,enumerable:!0,writable:!0,value:v}}),v.init(),v}e.application=a,e.request=h,e.response=i,e.Route=u,e.Router=o,e.json=t.json,e.query=Fe(),e.raw=t.raw,e.static=vt(),e.text=t.text,e.urlencoded=t.urlencoded;var p=["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"];p.forEach(function(v){Object.defineProperty(e,v,{get:function(){throw new Error("Most middleware (like "+v+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:!0})})})(ge,ge.exports);
